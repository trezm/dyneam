"use strict";(globalThis.webpackChunkbluehostPlugin=globalThis.webpackChunkbluehostPlugin||[]).push([[992],{7992:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var l=n(9307),s=n(5790),o=n(5784),r=n(2200),i=n(5736),a=n(3127);function u(e){let{children:t}=e;return t||(t=[(0,i.__)("You can clone your production site to update your staging site with new content.","bluehost-wordpress-plugin"),(0,i.__)("Making changes in a staging site doesnâ€™t effect your live site.","bluehost-wordpress-plugin"),(0,i.__)("If you want changes in a staging site to take effect on your live site, deploy them.","bluehost-wordpress-plugin")]),(0,l.createElement)(s.Zm,{settings:{adaptiveHeight:!0,arrows:!1,autoplay:!0,autoplaySpeed:1e4,dots:!0,infinite:!0,pauseOnDotsHover:!0,pauseOnHover:!0}},l.Children.map(t,(e=>(0,l.createElement)("p",null,(0,l.createElement)("span",null,(0,i.__)("Tip:","bluehost-wordpress-plugin"))," ",e))))}function c(e){let{}=e;return(0,l.createElement)(s.J4,{className:"bluehost-staging__overlay"},(0,l.createElement)("h1",null,(0,i.__)("Cloning Production Site","bluehost-wordpress-plugin")),(0,l.createElement)("p",null,(0,i.__)("This should only take a minute","bluehost-wordpress-plugin")),(0,l.createElement)("img",{className:"bluehost-staging__overlay-image",src:r.AD,width:"555",height:"421",alt:""}),(0,l.createElement)(u,null))}function p(e){let{onClick:t,onClose:n}=e;return(0,l.createElement)(s.q5,{actionsComponent:(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.Ri,null,(0,i.__)("This action cannot be undone","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{onClick:n},(0,i.__)("Cancel","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{isPrimary:!0,onClick:t},(0,i.__)("Clone","bluehost-wordpress-plugin"))),onRequestClose:n,title:(0,i.__)("Clone production to staging?","bluehost-wordpress-plugin")},(0,l.createElement)("p",null,(0,i.__)("Are you sure you want to clone production to staging? This will permanently overwrite your staging site.","bluehost-wordpress-plugin")))}function g(e){let{}=e;return(0,l.createElement)(s.J4,{className:"bluehost-staging__overlay"},(0,l.createElement)("h1",null,(0,i.__)("Deleting Staging Site","bluehost-wordpress-plugin")),(0,l.createElement)("p",null,(0,i.__)("This should only take a minute","bluehost-wordpress-plugin")),(0,l.createElement)("img",{className:"bluehost-staging__overlay-image",src:r.AD,width:"555",height:"421",alt:""}),(0,l.createElement)(u,null))}function h(e){let{onClick:t,onClose:n}=e;return(0,l.createElement)(s.q5,{actionsComponent:(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.Ri,null,(0,i.__)("This action cannot be undone","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{onClick:n},(0,i.__)("Cancel","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{isPrimary:!0,onClick:t},(0,i.__)("Delete","bluehost-wordpress-plugin"))),onRequestClose:n,title:(0,i.__)("Delete staging site?","bluehost-wordpress-plugin")},(0,l.createElement)("p",null,(0,i.__)("Are you sure you want to delete this staging site? This will permanently delete the staging instance from your site.","bluehost-wordpress-plugin")))}function d(e){let{type:t="all"}=e;return(0,l.createElement)(s.J4,{className:"bluehost-staging__overlay"},(0,l.createElement)("h1",null,(()=>{switch(t){case"db":return(0,i.__)("Deploying Database to Production Site","bluehost-wordpress-plugin");case"files":return(0,i.__)("Deploying Files to Production Site","bluehost-wordpress-plugin");default:return(0,i.__)("Deploying to Production Site","bluehost-wordpress-plugin")}})()),(0,l.createElement)("p",null,(0,i.__)("This should only take a minute","bluehost-wordpress-plugin")),(0,l.createElement)("img",{className:"bluehost-staging__overlay-image",src:r.AD,width:"555",height:"421",alt:""}),(0,l.createElement)(u,null))}function m(e){let t,n,{onClick:r,onClose:a,type:u="all"}=e;switch(u){case"db":t=(0,i.__)("Deploy Database to Production?","bluehost-wordpress-plugin"),n=(0,i.__)("This will override your production site. Are you sure you want to deploy the database from staging to production?","bluehost-wordpress-plugin");break;case"files":t=(0,i.__)("Deploy Files to Production?","bluehost-wordpress-plugin"),n=(0,i.__)("This will override your production site. Are you sure you want to deploy all staging files to production?","bluehost-wordpress-plugin");break;default:t=(0,i.__)("Deploy to Production?","bluehost-wordpress-plugin"),n=(0,i.__)("This will override your production site. Are you sure you want to deploy everything from staging to production?","bluehost-wordpress-plugin")}return(0,l.createElement)(s.q5,{actionsComponent:(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.Ri,null,(0,i.__)("This action cannot be undone","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{onClick:a},(0,i.__)("Cancel","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{className:"--delete",isPrimary:!0,onClick:r},(0,i.__)("Deploy","bluehost-wordpress-plugin"))),onRequestClose:a,title:t},(0,l.createElement)("p",null,n))}n(2819);var _=n(6989),b=n.n(_);function w(){const[e,t]=(0,l.useState)("all"),[n,_]=(0,l.useState)(!1),[w,y]=(0,l.useState)(!1),[E,v]=(0,l.useState)(!1),[f,C]=(0,l.useState)(!1),[S,k]=(0,l.useState)(!1),[T,D]=(0,l.useState)(!1),[{hasStaging:P,isCreatingStaging:N,isError:O,isProduction:U,notice:A,productionThumbnailUrl:q,productionUrl:I,stagingThumbnailUrl:R,stagingUrl:L,switchingTo:F},{createEnv:J,cloneEnv:z,deleteEnv:j,deployChanges:H,setNotice:Y,switchToEnv:x}]=function(){const[e,t]=(0,l.useState)(null),[n,s]=(0,l.useState)(null),[o,r]=(0,l.useState)(null),[a,u]=(0,l.useState)(null),[c,p]=(0,l.useState)(!1),[g,h]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),[_,w]=(0,l.useState)(null),[y,E]=(0,l.useState)(null),[v,f]=(0,l.useState)(null),[C,S]=(0,l.useState)(null),[k,T]=(0,l.useState)(null),[D,P]=(0,l.useState)(null),[N,O]=(0,l.useState)(""),U=(0,i.__)("An unknown error has occurred.","bluehost-wordpress-plugin"),A=async e=>{h(!1),m(!0),r(null);try{const t=await b()(e);if(t.hasOwnProperty("status")&&"error"===t.status)throw new Error(t.message);return m(!1),t}catch(e){return m(!1),h(!0),r(("object"==typeof e?e.message:e)||U),null}},q=e=>{e.hasOwnProperty("stagingExists")&&u(e.stagingExists),e.hasOwnProperty("currentEnvironment")&&s("production"===e.currentEnvironment),e.hasOwnProperty("productionDir")&&w(e.productionDir),e.hasOwnProperty("productionThumbnailUrl")&&E(e.productionThumbnailUrl),e.hasOwnProperty("productionUrl")&&f(e.productionUrl),e.hasOwnProperty("stagingDir")&&S(e.stagingDir),e.hasOwnProperty("stagingThumbnailUrl")&&T(e.stagingThumbnailUrl),e.hasOwnProperty("stagingUrl")&&P(e.stagingUrl),e.hasOwnProperty("creationDate")&&t(e.creationDate)};return(0,l.useEffect)((()=>{A({path:"/bluehost/v1/staging"}).then(q)}),[]),[{creationDate:e,hasStaging:a,isCreatingStaging:c,isError:g,isProduction:n,isLoading:d,notice:o,productionDir:_,productionThumbnailUrl:y,productionUrl:v,stagingDir:C,stagingThumbnailUrl:k,stagingUrl:D,switchingTo:N},{cloneEnv:async function(){await A({path:"/bluehost/v1/staging/clone",method:"POST"})&&r((0,i.__)("Website cloned successfully.","bluehost-wordpress-plugin"))},createEnv:async function(){p(!0);const e=await A({path:"/bluehost/v1/staging",method:"POST"});e&&(q(e),r(e.message),h("error"===e.status)),p(!1)},deleteEnv:async function(){await A({path:"/bluehost/v1/staging",method:"DELETE"})&&(u(!1),r((0,i.__)("Staging website destroyed.","bluehost-wordpress-plugin")))},deployChanges:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";await A({path:`/bluehost/v1/staging/deploy?type=${e}`,method:"POST"})&&r((0,i.__)("Changes deployed successfully.","bluehost-wordpress-plugin"))},setNotice:r,switchToEnv:async function(e){O(e);const t=await A({path:`/bluehost/v1/staging/switch-to?env=${e}`});t&&t.hasOwnProperty("load_page")&&(window.location.href=t.load_page)}}]}(),B=e=>{if(A){const t=document.querySelector(".bluehost-snackbar");t&&!t.contains(e.target)&&Y(null)}};return(0,l.useEffect)((()=>(A?document.addEventListener("mousedown",B):document.removeEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)})),[A]),(0,l.createElement)(a.r,{className:"bluehost-staging"},(0,l.createElement)(o.qc,{level:"h2",size:1,className:"is-page-title"},(0,i.__)("Staging","bluehost-wordpress-plugin")),(0,l.createElement)("p",null,(0,i.__)("A staging site is a copy of your site where you can safely test changes before publishing them to your production site. It gives you a way to try new things, test updates, and then deploy them when you're ready.","bluehost-wordpress-plugin")),(0,l.createElement)("div",{className:"bluehost-staging__production-env"},(0,l.createElement)(o.qc,{level:"h3",size:2},(0,i.__)("Production site","bluehost-wordpress-plugin")),(0,l.createElement)("p",null,(0,i.__)("This is your live website.","bluehost-wordpress-plugin")),(0,l.createElement)(s.u5,{color:"green",deploymentActionsComponent:P&&(0,l.createElement)(o.I9,{disabled:!U,isSecondary:!0,onClick:()=>_(!0)},(0,i.__)("Clone to Staging","bluehost-wordpress-plugin")),environmentName:(0,i.__)("Live Site","bluehost-wordpress-plugin"),radioButtonComponent:P&&(0,l.createElement)("label",null,U?(0,l.createElement)(r.ij,null):(0,l.createElement)(r.eu,null),(0,l.createElement)("span",{className:"sr-only"},(0,i.__)("Production","bluehost-wordpress-plugin")),(0,l.createElement)("input",{type:"radio",checked:!!U,onChange:()=>x("production")})),title:I})),(0,l.createElement)("div",{className:"bluehost-staging__staging-env"},(0,l.createElement)(o.qc,{level:"h3",size:2},(0,i.__)("Staging site","bluehost-wordpress-plugin")),N?(0,l.createElement)("div",{className:"bluehost-staging__step --creation"},(0,l.createElement)(o.z4,null),(0,l.createElement)("div",null,(0,i.__)("Creating your staging site. This usually takes a few minutes...","bluehost-wordpress-plugin")),(0,l.createElement)("p",null,(0,i.__)("You can wait or close this window and access your staging site from the staging menu after setup is complete.","bluehost-wordpress-plugin"))):P?(0,l.createElement)("div",{className:"bluehost-staging__step --ready"},(0,l.createElement)("p",null,(0,i.__)("This is an unpublished copy of your website.","bluehost-wordpress-plugin")),(0,l.createElement)(s.u5,{color:"black",deploymentActionsComponent:(0,l.createElement)(s.bJ,{disabled:U,options:[{title:(0,i.__)("Deploy All Changes","bluehost-wordpress-plugin"),description:(0,i.__)("Deploy all changes you've made to the filesystem and database of your website.","bluehost-wordpress-plugin"),callback:()=>{t("all"),v(!0)}},{title:(0,i.__)("Deploy Files Only","bluehost-wordpress-plugin"),description:(0,i.__)("This will only upload the files you've changed (i.e. html or css files).","bluehost-wordpress-plugin"),callback:()=>{t("files"),v(!0)}},{title:(0,i.__)("Deploy Database","bluehost-wordpress-plugin"),description:(0,i.__)("Only upload changes you've made to the database on your staging server.","bluehost-wordpress-plugin"),callback:()=>{t("db"),v(!0)}}],width:215}),environmentActionsComponent:U&&(0,l.createElement)(s._y,{label:(0,i.__)("Staging Options","bluehost-wordpress-plugin"),options:[{label:(0,i.__)("Delete","bluehost-wordpress-plugin"),callback:()=>k(!0)}]}),environmentName:(0,i.__)("Staging Site","bluehost-wordpress-plugin"),radioButtonComponent:(0,l.createElement)("label",null,U?(0,l.createElement)(r.eu,null):(0,l.createElement)(r.ij,null),(0,l.createElement)("span",{className:"sr-only"},(0,i.__)("Staging","bluehost-wordpress-plugin")),(0,l.createElement)("input",{type:"radio",checked:!U,onChange:()=>x("staging")})),title:L})):(0,l.createElement)("div",{className:"bluehost-staging__step --default"},(0,l.createElement)("p",null,(0,i.__)("You don't have a staging site yet.","bluehost-wordpress-plugin")),(0,l.createElement)(o.I9,{isPrimary:!0,onClick:J},(0,i.__)("Create Staging Site","bluehost-wordpress-plugin")))),A&&(0,l.createElement)(s.R4,{status:O?"error":"success",title:O?(0,i.__)("Error","bluehost-wordpress-plugin"):(0,i.__)("Success","bluehost-wordpress-plugin"),isDismissible:!0,onRemove:()=>Y(null)},(0,l.createElement)("p",null,A)),n&&(0,l.createElement)(p,{onClick:()=>{_(!1),y(!0),z().then((()=>y(!1)))},onClose:()=>_(!1)}),w&&(0,l.createElement)(c,null),S&&(0,l.createElement)(h,{onClick:()=>{k(!1),D(!0),j().then((()=>D(!1)))},onClose:()=>k(!1)}),T&&(0,l.createElement)(g,null),E&&(0,l.createElement)(m,{onClick:()=>{v(!1),C(!0),H(e).then((()=>C(!1)))},onClose:()=>v(!1),type:e}),f&&(0,l.createElement)(d,{type:e}),F&&(0,l.createElement)(s.J4,{className:"bluehost-staging__overlay"},(0,l.createElement)("h1",null,(0,i.sprintf)(/* translators: %s is replaced with the environment name (i.e. Production or Staging) */
(0,i.__)("Loading %s Site","bluehost-wordpress-plugin"),"production"===F?(0,i.__)("Production","bluehost-wordpress-plugin"):(0,i.__)("Staging","bluehost-wordpress-plugin"))),(0,l.createElement)("p",null,(0,i.__)("This should only take a minute","bluehost-wordpress-plugin")),(0,l.createElement)("img",{className:"bluehost-staging__overlay-image",src:r.AD,width:"555",height:"421",alt:""}),(0,l.createElement)(u,null)))}}}]);